# 漫反射公式的拓展

[55：59]

\\[
L_d=k_d\left( I/r^2 \right) \left( n\cdot l \right) 
\\]

这是Blinn-Phong模型中计算漫反射项的公式。上述公式的特点是：  
- \\(k_d\\) 不同点的颜色不同 
- \\(\left( I/r^2 \right) \left( n\cdot l \right) \\) 小球上所有点处于相同的一光照环境下

由于这个公式可以描述不同颜色的点在同一光照环境下的不同表现。

这只是将公式应用于漫反射的一个例子，它也可以适用于物体表面的其它属性。例如用它来做纹理贴图，只需要把\\(k_d\\)换成一种可以表示纹理的属性。

# 纹理映射 Texture Mapping

3D物体的表面是2D的

<img src="../assets/3D2D.jpg" width = 400 />

纹理：可以看作是一张有弹性、可拉伸的2D图。

纹理映射：是把2D纹理图贴在的物体表面的过程

![](../assets/texture.jpg)

映射关系：物体表面三角形面片上的顶点，与纹理图上的点的对应关系。  

纹理坐标：纹理图上的点的坐标，用符号(u, v)表示，u和v的范围都是[0, 1]

插值：映射关系只包含三角形顶点对应的(u，v)，三角形内部点的(u，v)通过插值得到

![](../assets/texture2.jpg)

# 应用纹理

目的：为屏幕上的点p=(x,y)设置颜色

1. 找出p在投影前的坐标p'=(x,y,z)
2. 计算p'的(u,v)
3. 从texture中取出(u,v)点的值pv
4. 设置p的值为(u,v)点的值为pv

> &#x2753; pv值对应漫反射公式中的kd，那么漫反射公式的后面两项跟纹理有什么关系？






------------------------------

> 本文出自CaterpillarStudyGroup，转载请注明出处。
>
> https://caterpillarstudygroup.github.io/GAMES101_mdbook/